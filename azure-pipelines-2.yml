name: Terraform_setup.yml

trigger: none

#This pipeline will be triggerred by another pipeline
resources:
  pipelines:
    - pipeline: Terraform_scripts
      source: Continous Integration (Building application and pushing to dockerhub)
      trigger: true


stages:
  - stage: Build
    jobs:
    - job: Build
      displayName: Start terraform script from main.tf
      pool: 
        #name: Default
        #demands: agent.os -equals Linux
        vmImage: ubuntu-latest
      steps:
      - task: Bash@3
        displayName: Terraform Scripts
        inputs:
          targetType: inline
          script: |
                  #! /bin/bash
                  cd Project
                  terraform init
                  terraform apply
